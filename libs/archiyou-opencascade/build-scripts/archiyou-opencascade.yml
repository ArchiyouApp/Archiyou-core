mainBuild:
  bindings:
  - symbol: BRepPrimAPI_MakeRevol
  - symbol: BRepFeat_MakeDPrism
  - symbol: TopoDS
  - symbol: TopoDS_Edge
  - symbol: BRepBndLib
  - symbol: Handle_TColgp_HArray1OfPnt
  - symbol: TopTools_SequenceOfShape
  #- symbol: MMgt_TShared # does ont exist
  - symbol: Standard_Transient
  #- symbol: TCollection_BaseSequence # does not exist
  - symbol: GeomAPI_Interpolate
  - symbol: BRep_Tool
  - symbol: BRepOffsetAPI_MakeOffsetShape
  - symbol: BRepAlgoAPI_Cut
  - symbol: IntTools_EdgeEdge
  - symbol: BRepPrimAPI_MakeCylinder
  - symbol: Handle_TColStd_HArray1OfBoolean
  - symbol: IntTools_FaceFace
  - symbol: BndLib_Add2dCurve
  - symbol: GeomAbs_SurfaceType
  - symbol: TopoDS_Builder
  - symbol: ChFi3d_FilletShape
  - symbol: Handle_Law_Function
  - symbol: TopoDS_CompSolid
  - symbol: ShapeAnalysis_Wire
  - symbol: TColgp_Array1OfVec
  - symbol: GCE2d_Root
  - symbol: gp_GTrsf
  - symbol: Geom_Surface
  - symbol: GC_MakeArcOfCircle
  - symbol: Geom2d_BSplineCurve
  - symbol: gp_Dir2d
  - symbol: gp_Vec
  - symbol: TopAbs_Orientation
  - symbol: BRepGProp
  - symbol: BRep_Builder
  - symbol: GeomFill_ConstrainedFilling
  - symbol: GeomFill_SimpleBound
  - symbol: Geom_OffsetCurve
  - symbol: gp_Elips2d
  - symbol: Handle_GeomFill_Boundary
  - symbol: GeomAbs_CurveType
  - symbol: GeomAbs_Shape
  - symbol: Handle_Geom_Surface
  - symbol: ShapeFix_Shape
  - symbol: GeomAPI_PointsToBSplineSurface
  - symbol: BRepMesh_DiscretRoot
  - symbol: STEPControl_Writer
  - symbol: BRepPrimAPI_MakeOneAxis
  - symbol: GeomAbs_JoinType
  - symbol: gp_XY
  - symbol: Handle_Poly_PolygonOnTriangulation
  - symbol: TopoDS_Shape
  - symbol: Geom_Geometry
  - symbol: Handle_Geom_Geometry
  - symbol: Adaptor3d_Surface
  - symbol: BRepPrimAPI_MakeBox
  - symbol: Handle_Poly_Triangulation
  - symbol: Geom2d_BoundedCurve
  - symbol: gp_Pln
  - symbol: BRepBuilderAPI_MakeSolid
  - symbol: gp_XYZ
  - symbol: BRepGProp_Face
  - symbol: BRepFill_TypeOfContact
  - symbol: TopoDS_Vertex
  - symbol: ShapeFix_Solid
  - symbol: BRepOffsetAPI_ThruSections
  - symbol: Geom2d_Geometry
  - symbol: BRepPrimAPI_MakeTorus
  - symbol: BRepFilletAPI_MakeFillet
  - symbol: BRepFilletAPI_MakeFillet2d
  - symbol: BRepOffsetAPI_MakePipe
  - symbol: Geom2d_BezierCurve
  - symbol: BRepFilletAPI_MakeChamfer
  - symbol: GCE2d_MakeArcOfEllipse
  - symbol: BRepCheck_Analyzer
  - symbol: Poly_Triangle
  #- symbol: Handle_TColgp_Array1OfVec
  - symbol: BOPAlgo_GlueEnum
  - symbol: Poly_Triangulation
  - symbol: Handle_Geom2d_Geometry
  - symbol: Handle_Geom_TrimmedCurve
  - symbol: TopoDS_Shell
  - symbol: BRepBuilderAPI_MakeShape
  - symbol: GC_Root
  - symbol: BRepAlgoAPI_Common
  - symbol: GeomLib
  - symbol: StdPrs_ToolTriangulatedShape
  - symbol: TopTools_ListOfShape
  - symbol: gp_Ax2
  - symbol: BRepOffsetAPI_MakeFilling
  - symbol: GProp_GProps
  - symbol: GCE2d_MakeSegment
  - symbol: TColgp_Array1OfPnt
  - symbol: TCollection_ExtendedString
  - symbol: TDocStd_Document
  - symbol: Handle_TDocStd_Document
  - symbol: XCAFDoc_DocumentTool
  - symbol: XCAFDoc_ShapeTool
  - symbol: Handle_XCAFDoc_ShapeTool
  - symbol: TDataStd_GenericEmpty
  - symbol: TDF_Attribute
  - symbol: XCAFDoc_ShapeTool
  - symbol: RWGltf_CafWriter
  - symbol: TCollection_AsciiString
  - symbol: TColStd_IndexedDataMapOfStringString
  - symbol: GeomLProp_CLProps
  - symbol: Geom2d_Circle
  - symbol: BRepAlgoAPI_BooleanOperation
  - symbol: Law_Interpol
  - symbol: StlAPI_Writer
  - symbol: CDM_Document
  - symbol: TDF_Label
  - symbol: TColgp_Array1OfDir
  - symbol: Law_Linear
  - symbol: Handle_Geom_Curve
  - symbol: ShapeAnalysis_Edge
  - symbol: Geom2d_TrimmedCurve
  - symbol: Handle_Geom2d_BezierCurve
  - symbol: gp_Trsf
  - symbol: TopoDS_Solid
  - symbol: gp_Dir
  - symbol: Handle_Geom_BSplineSurface
  - symbol: BRepLib_FindSurface
  - symbol: ShapeUpgrade_UnifySameDomain
  - symbol: BRepAlgoAPI_Fuse
  - symbol: Handle_Geom2d_Curve
  - symbol: Handle_Geom2d_BSplineCurve
  - symbol: BRepOffset_Mode
  - symbol: GeomAPI_ProjectPointOnCurve
  - symbol: GCPnts_TangentialDeflection
  - symbol: Extrema_ExtAlgo
  - symbol: Geom_Curve
  - symbol: Geom_ConicalSurface
  - symbol: gp_Pnt2d
  - symbol: Geom2dAPI_InterCurveCurve
  - symbol: BRepBuilderAPI_MakeFace
  - symbol: ShapeAnalysis_Surface
  - symbol: TColgp_Array2OfPnt
  - symbol: Poly_PolygonOnTriangulation
  - symbol: TopoDS_Wire
  - symbol: BRepFilletAPI_LocalOperation
  - symbol: Message_ProgressRange
  - symbol: Geom_CylindricalSurface
  - symbol: gp_Lin2d
  - symbol: Bnd_Box
  - symbol: TopoDS_Compound
  - symbol: Geom2d_Curve
  - symbol: GCE2d_MakeArcOfCircle
  - symbol: ShapeFix_Root
  - symbol: BRepPrimAPI_MakePrism
  - symbol: BRepBuilderAPI_MakeVertex
  - symbol: BRepOffsetAPI_MakePipeShell
  - symbol: BRepAdaptor_Curve
  - symbol: GeomAPI_ProjectPointOnSurf
  - symbol: GeomLProp_SLProps
  - symbol: ChFiDS_ChamfMode
  - symbol: TopoDS_Face
  - symbol: GeomAPI_PointsToBSpline
  - symbol: Handle_Geom_BezierCurve
  - symbol: BRepBuilderAPI_Command
  - symbol: BRepPrimAPI_MakeSweep
  - symbol: TopAbs_ShapeEnum
  - symbol: BRepExtrema_DistShapeShape
  - symbol: BRepAdaptor_CompCurve
  - symbol: BRepMesh_IncrementalMesh
  - symbol: STEPControl_StepModelType
  - symbol: Geom2d_Line
  - symbol: BRepBuilderAPI_Copy
  - symbol: ShapeFix_Wire
  - symbol: BRepBuilderAPI_TransitionMode
  - symbol: Handle_Geom2d_Circle
  - symbol: ShapeFix_Face
  - symbol: TopExp_Explorer
  - symbol: BRepTools_WireExplorer
  - symbol: gp_Ax2d
  - symbol: TColgp_Array1OfPnt2d
  - symbol: IFSelect_ReturnStatus
  - symbol: BRepBuilderAPI_ModifyShape
  - symbol: BRepBuilderAPI_MakeShell
  - symbol: TopLoc_Location
  - symbol: TopoDS_Iterator
  - symbol: Handle_Geom2d_Line
  - symbol: BRepBuilderAPI_MakeEdge
  - symbol: gp_Ax1
  - symbol: Handle_Geom2d_Ellipse
  - symbol: BRepBuilderAPI_Transform
  - symbol: gp_Circ
  - symbol: gp_GTrsf2d
  - symbol: Bnd_Box2d
  - symbol: gp_Vec2d
  - symbol: Geom_TrimmedCurve
  - symbol: Geom2d_Ellipse
  - symbol: Precision
  - symbol: Poly_Array1OfTriangle
  - symbol: gp_Trsf2d
  - symbol: BRepOffsetAPI_MakeThickSolid
  - symbol: BRepAdaptor_Surface
  - symbol: Adaptor3d_Curve
  - symbol: Handle_Adaptor3d_Curve
  - symbol: gp_Quaternion
  - symbol: Handle_Geom_BSplineCurve
  - symbol: Law_BSpFunc
  #- symbol: TColStd_HArray1OfBoolean
  - symbol: GC_MakeArcOfEllipse
  - symbol: gp_Pnt
  - symbol: BRepTools
  - symbol: BRepBuilderAPI_Sewing
  - symbol: TColStd_Array1OfInteger
  - symbol: Geom_ElementarySurface
  - symbol: Law_Function
  - symbol: BRepBuilderAPI_MakeWire
  - symbol: BRepPrimAPI_MakeCone
  - symbol: Geom_BoundedCurve
  - symbol: Geom_BSplineSurface
  - symbol: gp_Elips
  - symbol: Poly_Connect
  - symbol: Geom_BezierCurve
  - symbol: Handle_Geom2d_TrimmedCurve
  - symbol: BRepPrimAPI_MakeRevolution
  - symbol: BRepAlgoAPI_Section
  - symbol: BRepOffsetAPI_MakeOffset
  - symbol: NCollection_BaseList
  - symbol: NCollection_BaseMap
  - symbol: NCollection_BaseSequence
  #- symbol: NCollection_StlIterator # not there
  #- symbol: NCollection_Array1
  #- symbol: NCollection_Sequence
  # - symbol: NCollection_DefineHSequence # try to fix TopTools_HSequenceOfShape
  - symbol: TopTools_DataMapOfShapeSequenceOfShape
  - symbol: TopTools
  - symbol: TopTools_Array1OfShape
  - symbol: StdPrs_ShapeTool # includes TopTools_HSequenceOfShape headerfile (does not work to include TopTools_HSequenceOfShape)
  # - symbol: PK25TopTools_HSequenceOfShape # also does not work
  # - symbol: TopTools_HArray1OfShape
  - symbol: Handle_TopTools_HSequenceOfShape
  #- symbol: TopTools_HSequenceOfShape # not there
  - symbol: Handle_TopTools_HArray1OfShape
  - symbol: ShapeAnalysis_FreeBounds
  - symbol: ShapeAnalysis_FreeBoundsProperties
  - symbol: BRepAlgoAPI_Algo
  - symbol: TColStd_Array1OfBoolean
  - symbol: Handle_Geom2d_BoundedCurve
  - symbol: BRepPrimAPI_MakeSphere
  - symbol: Geom_BSplineCurve
  - symbol: Law_S
  - symbol: Geom_BoundedSurface
  - symbol: BRepTools_ReShape
  - symbol: Law_Composite
  - symbol: gp_Ax3
  - symbol: gp_Cylinder
  - symbol: BRepLib
  - symbol: BRepFeat_Form
  - symbol: BRepAlgoAPI_BuilderAlgo
  - symbol: Extrema_ExtFlag
  - symbol: Extrema_ExtAlgo
  - symbol: GeomAdaptor_Curve
  - symbol: BOPAlgo_Algo
  - symbol: BOPAlgo_BuilderShape
  - symbol: BOPAlgo_Builder
  - symbol: BOPAlgo_Tools
  - symbol: BOPAlgo_ToolsProvider
  - symbol: BOPAlgo_Options
  - symbol: BOPAlgo_Operation
  - symbol: BOPAlgo_Splitter
  - symbol: BRepBuilderAPI_WireError
  - symbol: BRepBuilderAPI_FaceError
  #- symbol: Adaptor3d_HCurve
  #- symbol: Handle_Adaptor3d_HCurve
  - symbol: GeomFill_Boundary
  - symbol: Standard_Failure
  #- symbol: Adaptor3d_CurveEE
  - symbol: Geom_SurfaceOfRevolution
  - symbol: Geom_SweptSurface
  - symbol: Geom_ToroidalSurface
  - symbol: Handle_Geom2d_Curve
  - symbol: Handle_Geom_BezierCurve
  - symbol: TColStd_Array1OfReal
  - symbol: Bnd_OBB
  - symbol: HLRBRep_InternalAlgo
  - symbol: HLRBRep_Algo
  - symbol: Handle_HLRBRep_Algo
  - symbol: HLRAlgo_Projector
  - symbol: HLRBRep_HLRToShape
  - symbol: GCPnts_QuasiUniformDeflection
  - symbol: TDataStd_Name
  - symbol: Handle_TDataStd_Name
  - symbol: TDataStd_NamedData
  - symbol: Handle_TDataStd_NamedData
  - symbol: TDataStd_GenericExtString
  - symbol: Handle_TDataStd_GenericExtString
  - symbol: Handle_TDF_Attribute
  - symbol: Standard_GUID
  - symbol: XCAFDoc_VisMaterialTool
  - symbol: Handle_XCAFDoc_VisMaterialTool
  - symbol: XCAFDoc_VisMaterial
  - symbol: Handle_XCAFDoc_VisMaterial
  - symbol: XCAFDoc_VisMaterialPBR
  - symbol: Quantity_ColorRGBA
  - symbol: Quantity_Color
  - symbol: RWMesh_CoordinateSystemConverter
  - symbol: RWMesh_CoordinateSystem
  - symbol: BRepProj_Projection
  # test
  - symbol: TopTools_HSequenceOfShape_Getter
  - symbol: TopTools_HSequenceOfShape2
  - symbol: OCJS
  emccFlags:
    - -sEXPORT_ES6=1
    - -sUSE_ES6_IMPORT_META=0
    - -sINITIAL_MEMORY=100MB
    - -sMAXIMUM_MEMORY=4GB
    - -sALLOW_MEMORY_GROWTH=1
    - -sEXPORTED_RUNTIME_METHODS=["FS"]
    - -O3
    - -sUSE_FREETYPE=1
    - -sEXPORTED_FUNCTIONS=[]
  name: archiyou-opencascade.js

# NOTES ON: can not import symbol 'TopTools_HSequence'
# Needed for ShapeAnalysis_FreeBounds
# Analysis: 
#     TopTools_HSequenceOfShape is generated by Macro DEFINE_HSEQUENCE
#     See definition: https://github.com/Open-Cascade-SAS/OCCT/blob/2fa9309186226a29ae47ee21c07a288668f412af/src/NCollection/NCollection_DefineHSequence.hxx#L26
#     in header file https://github.com/Open-Cascade-SAS/OCCT/blob/2fa9309186226a29ae47ee21c07a288668f412af/src/TopTools/TopTools_HSequenceOfShape.hxx#L24
#     The type Handle_TopTools_HSequenceOfShape
# 
#  Solutions:
#    
#
#    -1: Convert ConnectEdgesToWires/ConnectWiresToWires to not using TopTools_HSequenceOfShape, but TopTools_HArray1OfShape
#    https://github.com/Open-Cascade-SAS/OCCT/blob/ae1683705ef5c9a7e767c5c873e7d725b04d262f/src/ShapeAnalysis/ShapeAnalysis_FreeBounds.cxx#L135

additionalCppCode: |

  // typedef TopTools_HSequenceOfShape Handle_TopTools_HSequenceOfShape; // Already defined, gives error
  typedef Handle(IMeshTools_Context) Handle_IMeshTools_Context;

  // Try manually with macro
  // DEFINE_HSEQUENCE(TopTools_HSequenceOfShape, TopTools_SequenceOfShape) //  error: redefinition of 'TopTools_HSequenceOfShape'
  // typedef TopTools_HSequenceOfShape TopTools_HSequenceOfShape2; // it does exist

  
  class TopTools_HSequenceOfShape_Getter 
  {
    public:
      static TopTools_HSequenceOfShape* Get()
      {
        return new TopTools_HSequenceOfShape();
      }
  };
  
  // Stil does not get emitted somehow - "TopTools_HSequenceOfShape2 does not exist!"
  /*
  class TopTools_HSequenceOfShape2 : public  TopTools_SequenceOfShape, public Standard_Transient {              
    public:                                                                       
      DEFINE_STANDARD_ALLOC                                                       
      DEFINE_NCOLLECTION_ALLOC                                                    
      TopTools_HSequenceOfShape2 () {}                                                            
      TopTools_HSequenceOfShape2 (const  TopTools_SequenceOfShape& theOther) :  TopTools_SequenceOfShape(theOther) {} 
      const  TopTools_SequenceOfShape& Sequence () const { return *this; }
      void Append (const  TopTools_SequenceOfShape::value_type& theItem) {
         TopTools_SequenceOfShape::Append (theItem);
      }                                                                           
      void Append ( TopTools_SequenceOfShape& theSequence) {                                 
         TopTools_SequenceOfShape::Append (theSequence);
      }                                                 
       TopTools_SequenceOfShape& ChangeSequence (){ return *this; }
      template <class T>                     
      void Append (const Handle(T)& theOther,
                    typename opencascade::std::enable_if<opencascade::std::is_base_of<TopTools_HSequenceOfShape2, T>::value>::type * = 0) {
         TopTools_SequenceOfShape::Append (theOther->ChangeSequence());                    
      }                                                                           
      DEFINE_STANDARD_RTTI_INLINE(TopTools_HSequenceOfShape2,Standard_Transient)                             
    };
    DEFINE_STANDARD_HANDLE (TopTools_HSequenceOfShape2, Standard_Transient) 
  */

  // Does not work: class TopTools_HSequenceOfShape2 : public  TopTools_SequenceOfShape, public Standard_Transient {            
  // Without works
  // So inheritance is the problem!
  // Standard_Transient works, TopTools_SequenceOfShape works seperately
  class TopTools_HSequenceOfShape2 : public TopTools_SequenceOfShape {              
    public:
      static TopTools_HSequenceOfShape* Get()
      {
        return new TopTools_HSequenceOfShape();
      }
  };

  class OCJS {
  public:
    static Standard_Failure* getStandard_FailureData(intptr_t exceptionPtr) {
      return reinterpret_cast<Standard_Failure*>(exceptionPtr);
    }
  };