mainBuild:
  bindings:
  - symbol: BRepPrimAPI_MakeRevol
  - symbol: BRepFeat_MakeDPrism
  - symbol: TopoDS
  - symbol: TopoDS_Edge
  - symbol: BRepBndLib
  - symbol: Handle_TColgp_HArray1OfPnt
  - symbol: Standard_Transient
  - symbol: GeomAPI_Interpolate
  - symbol: BRep_Tool
  - symbol: BRepOffsetAPI_MakeOffsetShape
  - symbol: BRepAlgoAPI_Cut
  - symbol: IntTools_EdgeEdge
  - symbol: BRepPrimAPI_MakeCylinder
  - symbol: Handle_TColStd_HArray1OfBoolean
  - symbol: IntTools_FaceFace
  - symbol: BndLib_Add2dCurve
  - symbol: GeomAbs_SurfaceType
  - symbol: TopoDS_Builder
  - symbol: ChFi3d_FilletShape
  - symbol: Handle_Law_Function
  - symbol: TopoDS_CompSolid
  - symbol: ShapeAnalysis_Wire
  - symbol: TColgp_Array1OfVec
  - symbol: GCE2d_Root
  - symbol: gp_GTrsf
  - symbol: Geom_Surface
  - symbol: GC_MakeArcOfCircle
  - symbol: Geom2d_BSplineCurve
  - symbol: gp_Dir2d
  - symbol: gp_Vec
  - symbol: TopAbs_Orientation
  - symbol: BRepGProp
  - symbol: BRep_Builder
  - symbol: GeomFill_ConstrainedFilling
  - symbol: GeomFill_SimpleBound
  - symbol: Geom_OffsetCurve
  - symbol: gp_Elips2d
  - symbol: Handle_GeomFill_Boundary
  - symbol: GeomAbs_CurveType
  - symbol: GeomAbs_Shape
  - symbol: Handle_Geom_Surface
  - symbol: ShapeFix_Shape
  - symbol: GeomAPI_PointsToBSplineSurface
  - symbol: BRepMesh_DiscretRoot
  - symbol: STEPControl_Writer
  - symbol: BRepPrimAPI_MakeOneAxis
  - symbol: GeomAbs_JoinType
  - symbol: gp_XY
  - symbol: Handle_Poly_PolygonOnTriangulation
  - symbol: TopoDS_Shape
  - symbol: Geom_Geometry
  - symbol: Handle_Geom_Geometry
  - symbol: Adaptor3d_Surface
  - symbol: BRepPrimAPI_MakeBox
  - symbol: Handle_Poly_Triangulation
  - symbol: Geom2d_BoundedCurve
  - symbol: gp_Pln
  - symbol: BRepBuilderAPI_MakeSolid
  - symbol: gp_XYZ
  - symbol: BRepGProp_Face
  - symbol: BRepFill_TypeOfContact
  - symbol: TopoDS_Vertex
  - symbol: ShapeFix_Solid
  - symbol: BRepOffsetAPI_ThruSections
  - symbol: Geom2d_Geometry
  - symbol: BRepPrimAPI_MakeTorus
  - symbol: BRepFilletAPI_MakeFillet
  - symbol: BRepFilletAPI_MakeFillet2d
  - symbol: BRepOffsetAPI_MakePipe
  - symbol: Geom2d_BezierCurve
  - symbol: BRepFilletAPI_MakeChamfer
  - symbol: GCE2d_MakeArcOfEllipse
  - symbol: BRepCheck_Analyzer
  - symbol: Poly_Triangle
  #- symbol: Handle_TColgp_Array1OfVec
  - symbol: BOPAlgo_GlueEnum
  - symbol: Poly_Triangulation
  - symbol: Handle_Geom2d_Geometry
  - symbol: Handle_Geom_TrimmedCurve
  - symbol: TopoDS_Shell
  - symbol: BRepBuilderAPI_MakeShape
  - symbol: GC_Root
  - symbol: BRepAlgoAPI_Common
  - symbol: GeomLib
  - symbol: StdPrs_ToolTriangulatedShape
  - symbol: TopTools_ListOfShape
  - symbol: gp_Ax2
  - symbol: BRepOffsetAPI_MakeFilling
  - symbol: GProp_GProps
  - symbol: GCE2d_MakeSegment
  - symbol: TColgp_Array1OfPnt
  - symbol: TCollection_ExtendedString
  - symbol: TDocStd_Document
  - symbol: Handle_TDocStd_Document
  - symbol: XCAFDoc_DocumentTool
  - symbol: XCAFDoc_ShapeTool
  - symbol: Handle_XCAFDoc_ShapeTool
  - symbol: NCollection_BaseMap
  - symbol: TDataStd_GenericEmpty
  - symbol: TDF_Attribute
  - symbol: XCAFDoc_ShapeTool
  - symbol: RWGltf_CafWriter
  - symbol: TCollection_AsciiString
  - symbol: TColStd_IndexedDataMapOfStringString
  - symbol: GeomLProp_CLProps
  - symbol: Geom2d_Circle
  - symbol: BRepAlgoAPI_BooleanOperation
  - symbol: Law_Interpol
  - symbol: StlAPI_Writer
  - symbol: CDM_Document
  - symbol: TDF_Label
  - symbol: TColgp_Array1OfDir
  - symbol: Law_Linear
  - symbol: Handle_Geom_Curve
  - symbol: ShapeAnalysis_Edge
  - symbol: Geom2d_TrimmedCurve
  - symbol: Handle_Geom2d_BezierCurve
  - symbol: gp_Trsf
  - symbol: TopoDS_Solid
  - symbol: gp_Dir
  - symbol: Handle_Geom_BSplineSurface
  - symbol: BRepLib_FindSurface
  - symbol: ShapeUpgrade_UnifySameDomain
  - symbol: BRepAlgoAPI_Fuse
  - symbol: Handle_Geom2d_Curve
  - symbol: Handle_Geom2d_BSplineCurve
  - symbol: BRepOffset_Mode
  - symbol: GeomAPI_ProjectPointOnCurve
  - symbol: GCPnts_TangentialDeflection
  - symbol: Extrema_ExtAlgo
  - symbol: Geom_Curve
  - symbol: Geom_ConicalSurface
  - symbol: gp_Pnt2d
  - symbol: Geom2dAPI_InterCurveCurve
  - symbol: BRepBuilderAPI_MakeFace
  - symbol: ShapeAnalysis_Surface
  - symbol: TColgp_Array2OfPnt
  - symbol: Poly_PolygonOnTriangulation
  - symbol: TopoDS_Wire
  - symbol: BRepFilletAPI_LocalOperation
  - symbol: Message_ProgressRange
  - symbol: Geom_CylindricalSurface
  - symbol: gp_Lin2d
  - symbol: Bnd_Box
  - symbol: TopoDS_Compound
  - symbol: Geom2d_Curve
  - symbol: GCE2d_MakeArcOfCircle
  - symbol: ShapeFix_Root
  - symbol: BRepPrimAPI_MakePrism
  - symbol: BRepBuilderAPI_MakeVertex
  - symbol: BRepOffsetAPI_MakePipeShell
  - symbol: BRepAdaptor_Curve
  - symbol: GeomAPI_ProjectPointOnSurf
  - symbol: GeomLProp_SLProps
  - symbol: ChFiDS_ChamfMode
  - symbol: TopoDS_Face
  - symbol: GeomAPI_PointsToBSpline
  - symbol: Handle_Geom_BezierCurve
  - symbol: BRepBuilderAPI_Command
  - symbol: BRepPrimAPI_MakeSweep
  - symbol: TopAbs_ShapeEnum
  - symbol: BRepExtrema_DistShapeShape
  - symbol: BRepAdaptor_CompCurve
  - symbol: BRepMesh_IncrementalMesh
  - symbol: STEPControl_StepModelType
  - symbol: Geom2d_Line
  - symbol: BRepBuilderAPI_Copy
  - symbol: ShapeFix_Wire
  - symbol: BRepBuilderAPI_TransitionMode
  - symbol: Handle_Geom2d_Circle
  - symbol: ShapeFix_Face
  - symbol: TopExp_Explorer
  - symbol: BRepTools_WireExplorer
  - symbol: gp_Ax2d
  - symbol: TColgp_Array1OfPnt2d
  - symbol: IFSelect_ReturnStatus
  - symbol: BRepBuilderAPI_ModifyShape
  - symbol: BRepBuilderAPI_MakeShell
  - symbol: TopLoc_Location
  - symbol: TopoDS_Iterator
  - symbol: Handle_Geom2d_Line
  - symbol: BRepBuilderAPI_MakeEdge
  - symbol: gp_Ax1
  - symbol: Handle_Geom2d_Ellipse
  - symbol: BRepBuilderAPI_Transform
  - symbol: gp_Circ
  - symbol: gp_GTrsf2d
  - symbol: Bnd_Box2d
  - symbol: gp_Vec2d
  - symbol: Geom_TrimmedCurve
  - symbol: Geom2d_Ellipse
  - symbol: Precision
  - symbol: Poly_Array1OfTriangle
  - symbol: gp_Trsf2d
  - symbol: BRepOffsetAPI_MakeThickSolid
  - symbol: BRepAdaptor_Surface
  - symbol: Adaptor3d_Curve
  - symbol: Handle_Adaptor3d_Curve
  - symbol: gp_Quaternion
  - symbol: Handle_Geom_BSplineCurve
  - symbol: Law_BSpFunc
  #- symbol: TColStd_HArray1OfBoolean
  - symbol: GC_MakeArcOfEllipse
  - symbol: gp_Pnt
  - symbol: BRepTools
  - symbol: BRepBuilderAPI_Sewing
  - symbol: TColStd_Array1OfInteger
  - symbol: Geom_ElementarySurface
  - symbol: Law_Function
  - symbol: BRepBuilderAPI_MakeWire
  - symbol: BRepPrimAPI_MakeCone
  - symbol: Geom_BoundedCurve
  - symbol: Geom_BSplineSurface
  - symbol: gp_Elips
  - symbol: Poly_Connect
  - symbol: Geom_BezierCurve
  - symbol: Handle_Geom2d_TrimmedCurve
  - symbol: BRepPrimAPI_MakeRevolution
  - symbol: BRepAlgoAPI_Section
  - symbol: BRepOffsetAPI_MakeOffset
  - symbol: NCollection_BaseList
  - symbol: BRepAlgoAPI_Algo
  - symbol: TColStd_Array1OfBoolean
  - symbol: Handle_Geom2d_BoundedCurve
  - symbol: BRepPrimAPI_MakeSphere
  - symbol: Geom_BSplineCurve
  - symbol: Law_S
  - symbol: Geom_BoundedSurface
  - symbol: BRepTools_ReShape
  - symbol: Law_Composite
  - symbol: gp_Ax3
  - symbol: gp_Cylinder
  - symbol: BRepLib
  - symbol: BRepFeat_Form
  - symbol: BRepAlgoAPI_BuilderAlgo
  - symbol: Extrema_ExtFlag
  - symbol: Extrema_ExtAlgo
  - symbol: GeomAdaptor_Curve
  - symbol: BOPAlgo_Algo
  - symbol: BOPAlgo_BuilderShape
  - symbol: BOPAlgo_Builder
  - symbol: BOPAlgo_ToolsProvider
  - symbol: BOPAlgo_Options
  - symbol: BOPAlgo_Operation
  - symbol: BOPAlgo_Splitter
  - symbol: BRepBuilderAPI_WireError
  - symbol: BRepBuilderAPI_FaceError
  #- symbol: Adaptor3d_HCurve
  #- symbol: Handle_Adaptor3d_HCurve
  - symbol: GeomFill_Boundary
  - symbol: Standard_Failure
  #- symbol: Adaptor3d_CurveEE
  - symbol: Geom_SurfaceOfRevolution
  - symbol: Geom_SweptSurface
  - symbol: Geom_ToroidalSurface
  - symbol: Handle_Geom2d_Curve
  - symbol: Handle_Geom_BezierCurve
  - symbol: TColStd_Array1OfReal
  - symbol: Bnd_OBB
  - symbol: HLRBRep_InternalAlgo
  - symbol: HLRBRep_Algo
  - symbol: Handle_HLRBRep_Algo
  - symbol: HLRAlgo_Projector
  - symbol: HLRBRep_HLRToShape
  - symbol: GCPnts_QuasiUniformDeflection
  - symbol: TDataStd_Name
  - symbol: Handle_TDataStd_Name
  - symbol: TDataStd_NamedData
  - symbol: Handle_TDataStd_NamedData
  - symbol: TDataStd_GenericExtString
  - symbol: Handle_TDataStd_GenericExtString
  - symbol: Handle_TDF_Attribute
  - symbol: Standard_GUID
  - symbol: XCAFDoc_VisMaterialTool
  - symbol: Handle_XCAFDoc_VisMaterialTool
  - symbol: XCAFDoc_VisMaterial
  - symbol: Handle_XCAFDoc_VisMaterial
  - symbol: XCAFDoc_VisMaterialPBR
  - symbol: Quantity_ColorRGBA
  - symbol: Quantity_Color
  - symbol: RWMesh_CoordinateSystemConverter
  - symbol: RWMesh_CoordinateSystem
  - symbol: Handle_TopTools_HSequenceOfShape
  - symbol: ShapeAnalysis_FreeBounds
  - symbol: ShapeAnalysis_FreeBoundsProperties
  - symbol: TopTools
  - symbol: TopTools_SequenceOfShape  
  #- symbol: TopTools_HSequenceOfShape # not there
  - symbol: OCJS
  emccFlags:
    - -sEXPORT_ES6=1
    - -sUSE_ES6_IMPORT_META=0
    - -sINITIAL_MEMORY=100MB
    - -sMAXIMUM_MEMORY=4GB
    - -sALLOW_MEMORY_GROWTH=1
    - -sEXPORTED_RUNTIME_METHODS=["FS"]
    - -O3
    - -sUSE_FREETYPE=1
    #- sEXPORTED_FUNCTIONS=
  name: archiyou-opencascade.js

# PROBLEM: can not import symbol 'TopTools_HSequence'
# fix TopTools_HSequence. See hints: https://github.com/donalffons/opencascade.js/issues?q=is%3Aissue+is%3Aclosed
# DEFINE_HSEQUENCE(TopTools_HSequenceOfShape, TopTools_SequenceOfShape);
# see: https://github.com/Open-Cascade-SAS/OCCT/blob/ae1683705ef5c9a7e767c5c873e7d725b04d262f/src/NCollection/NCollection_DefineHSequence.hxx#L27
# POSSIBLE SOLUTION:
# Convert ConnectEdgesToWires/ConnectWiresToWires to not using TopTools_HSequenceOfShape, but TopTools_HArray1OfShape
# https://github.com/Open-Cascade-SAS/OCCT/blob/ae1683705ef5c9a7e767c5c873e7d725b04d262f/src/ShapeAnalysis/ShapeAnalysis_FreeBounds.cxx#L135

additionalCppCode: |
  typedef Handle(IMeshTools_Context) Handle_IMeshTools_Context;
  class OCJS {
  public:
    static Standard_Failure* getStandard_FailureData(intptr_t exceptionPtr) {
      return reinterpret_cast<Standard_Failure*>(exceptionPtr);
    }
  };